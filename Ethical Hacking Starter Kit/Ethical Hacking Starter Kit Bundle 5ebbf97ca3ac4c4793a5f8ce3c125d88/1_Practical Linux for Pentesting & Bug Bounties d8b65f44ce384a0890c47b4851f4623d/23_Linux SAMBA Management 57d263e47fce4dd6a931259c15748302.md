# 23_Linux SAMBA Management

## What is Samba Server?

Samba is a free, open-source implementation of the SMB/CIFS networking protocol. It provides file and print services between different platforms, including Windows and Linux. Samba server allows Linux systems to interact with Windows clients and servers seamlessly, enabling file and printer sharing across networks.

## Config SAMBA Server For **Guest User**

To check the status of the SAMBA server, you can run the command `sudo service smbd status` in the terminal. This will show you whether the server is currently running and any errors or issues that may be occurring.

To start the Samba server, you can run the command `sudo service smbd start` in the terminal. This will start the SAMBA service on your system. If the server is not installed on your system, you will need to install it first using the command `sudo apt-get install samba -y`.

To configure a SAMBA server, you can add the following code to the `etc/samba/smb.conf` file:

```bash
[MyShare]
comment = SAMBA Works!
path = /root/ufonet/
read only = no
guest ok = yes
```

- `[MyShare]`: This is the name of the share that will be created on the server. It can be any name that you choose.
- `comment = SAMBA Works!`: This is a comment that will be displayed when a user browses the server. It can be any text that you choose.
- `path = /root/ufonet/`: This is the directory on the server that will be shared with other systems.
- `read only = no`: This line specifies that the other systems will have write access to the directory. If you set this to "yes", then they will only have read access.
- `guest ok = yes`: This line allows guests to access the shared directory without requiring authentication. If you set this to "no", then users will need to enter a username and password to access the share.

After any modification, you need to restart the server by run the command `sudo service smbd restart` in the terminal. This will restart the SAMBA service on your system.

### **Linux** Connection

To connect to a SAMBA server from a **Linux** client, you can use the `smbclient` command in the terminal. The basic syntax is:

```
smbclient //<server>/<share> -U <username>
```

- `<server>` is the name or IP address of the SAMBA server.
- `<share>` is the name of the share that you want to connect to.
- `<username>` is the username that you want to use to authenticate with the server.

For example, if the SAMBA server's IP address is `192.168.1.100` and the share is named `MyShare`, and you want to connect as the user `jdoe`, you would use the following command:

```
smbclient //192.168.1.100/MyShare -U jdoe

```

### Mac ****Connection

To connect from a **Mac**, you can use the "Connect to Server" feature in the Finder. In the Finder, click on "Go" in the menu bar, and select "Connect to Server". In the dialog box that appears, enter the address of the SAMBA server in the format:

```
smb://<username>@<server>/<share>

```

- `<username>` is the username that you want to use to authenticate with the server.
- `<server>` is the name or IP address of the SAMBA server.
- `<share>` is the name of the share that you want to connect to.

For example, if the SAMBA server's IP address is `192.168.1.100` and the share is named `MyShare`, and you want to connect as the user `jdoe`, you would enter:

```
smb://jdoe@192.168.1.100/MyShare
```

### Windows ****Connection

To connect from a **Windows** client, open File Explorer and enter the address of the SAMBA server in the format:

```
\\\\<server>\\<share> 
```

- `<server>` is the name or IP address of the SAMBA server.
- `<share>` is the name of the share that you want to connect to.

For example, if the SAMBA server's IP address is `192.168.1.100` and the share is named `MyShare`, you would enter:

```
\\\\192.168.1.100\\MyShare
```

If prompted, enter your username and password to authenticate with the SAMBA server.

## Config SAMBA Server For Specific User

To configure Samba for a specific user, you can follow these steps:

1. Create a new user by running the command `useradd <username>` in the terminal. For example, to create a user named "Shifa", you would run `useradd Shifa`.
2. Set a password for the new user by running the command `passwd <username>` in the terminal. For example, to set a password for the user "Shifa", you would run `passwd Shifa`.
3. Add the user to the Samba password database by running the command `smbpasswd -a <username>` in the terminal. For example, to add the user "Shifa" to the Samba password database, you would run `smbpasswd -a Shifa`.
4. Edit the `/etc/samba/smb.conf` file by running the command `sudo nano /etc/samba/smb.conf` in the terminal.
5. Add the following code to the file:
    
    ```
    [share1]
    comment = A Shared Directory
    path = /var/tmp/sharedir
    valid users = Shifa
    public = no
    writable = yes
    
    ```
    
    - `[share1]`: This is the name of the share that will be created on the server. It can be any name that you choose.
    - `comment = A Shared Directory`: This is a comment that will be displayed when a user browses the server. It can be any text that you choose.
    - `path = /var/tmp/sharedir`: This is the directory on the server that will be shared with other systems.
    - `valid users = Shifa`: This line specifies that only the user "Shifa" will have access to the shared directory. If you want to allow multiple users, you can separate their names with commas.
    - `public = no`: This line specifies that the shared directory is not public, meaning that only authenticated users will be able to access it.
    - `writable = yes`: This line specifies that the other systems will have write access to the directory.
6. Save the file and exit the editor.
7. Restart the Samba server by running the command `sudo service smb restart` in the terminal.

After completing these steps, the user "Shifa" will be able to access the shared directory by connecting to the SAMBA server using their username and password.