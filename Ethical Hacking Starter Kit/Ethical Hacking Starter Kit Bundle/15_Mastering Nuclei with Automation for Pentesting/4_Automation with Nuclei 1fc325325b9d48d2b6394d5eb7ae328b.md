# 4_Automation with Nuclei

# Nuclei Input with Subdomains

### Subfinder

One tool that can be used to generate subdomains for use with Nuclei is [**Subfinder**](https://github.com/projectdiscovery/subfinder). This tool can be used to **find subdomains** for a given domain name and output them to a file. The output can then be used as input for Nuclei.

**`subfinder -d [nmap.org](http://nmap.org/) -o nmap-subs.txt`**

The command is used to find subdomains for the domain `nmap.org` and output them to a file named `nmap-subs.txt`. This file can then be used as input for Nuclei to scan those subdomains for vulnerabilities.

### HTTPX

Another tool that is commonly used in conjunction with Nuclei is **[HTTPX](https://github.com/projectdiscovery/httpx)**. This tool is used to scan a **list of subdomains** and identify which hosts are running web servers and which are not. The output can then be used as input for Nuclei.

`**httpx -l nmap-subs.txt -o nmap-subs-live.txt**`

The command is used to scan a list of subdomains (`nmap-subs.txt`) and identify which hosts are running web servers and which are not. The output is saved to `nmap-subs-live.txt` and can be used as input for Nuclei.

# Updating Nuclei

To update Nuclei, run the following command:

`nuclei -update`

This command will update Nuclei to the latest version available.

# Nuclei Metrics & Stats

- Nuclei stores metrics i.e. details of scan
- Can be activated using -metrics flag
- Can be accessed at localhost: 9092/metrics

Nuclei provides metrics and statistics for users to analyze their scans.

Metrics:

- Requests made
- Responses received
- Successful requests
- Failed requests
- Total time

Statistics:

- Vulnerable requests
- Total templates
- Total matched templates
- Matched templates (with frequency)

Nuclei provides these in JSON and HTML formats. To generate them, run:

`nuclei -stats -json report.json -html report.html`

# Nuclei Info Block

## Nuclei -Template Information

- Template Information is defined using info:
    
    ```yaml
    id: nuclei-info-block
    info:
    	name: Nuclei-info-block
    	author: hacktifycs
    	severity: info
    	tags: tech, info
    	description: Desc
    	reference: https://google.com/...
    
    ```
    

# Request and Dynamic Path

## Nuclei - Base Requests

- Nuclei requests start with request: block
- Request methods can be: GET, POST, PUT, DELETE
- Redirects can be enabled using the redirects: variable
- Each request should be given a path using path:

## Nuclei Dynamic Path Variable

![Screenshot 2023-06-08 at 3.12.03 PM.png](4_Automation%20with%20Nuclei%201fc325325b9d48d2b6394d5eb7ae328b/Screenshot_2023-06-08_at_3.12.03_PM.png)

### `requests.yaml`

```yaml
id: nuclei-requests-block
info:
	name: Nuclei Requests Block 
	author: hacktifycs 
	severity: info
	tags: panel, info, nuclei 
	description: Write your description here 
	reference: https://hacktify.in/
requests:
- method: GET 
	path:
		-'{{BaseURL}}'
		-'{{RootURL}}'
		- 'htto://{SHostname??'
		-'http://{{Host}}'
		-'{{BaseURL}}:{{Port}}'
		-'https://hacktify.in{{Path}}'
		- 'https://hacktify.in/{{File}}'
```

This YAML file is a Nuclei requests block. It has an ID of `nuclei-requests-block`. The `info` field provides some information about the block, including its name, author, severity, tags, description, and reference. The `requests` field is a list of HTTP requests to be sent by Nuclei. In this example, there is one request with a GET method. The `path` field contains a list of paths to be appended to the base URL. The paths include variables enclosed in double curly braces (e.g. `{{BaseURL}}`, `{{RootURL}}`) which will be replaced by their corresponding values during the scan. The paths can also include question marks and colons.

# Nuclei & Burp Suit

- indicate the port which you want to listen

### `nuclei -u "<url>" -t <template> -p http://127.0.0.1:8081`

This command is used to run a scan using Nuclei with the following options:

- `u` option specifies the URL to scan (in this case, `http://bugbountyhunter.org/nuclei/file1.txt`).
- `t` option specifies the Nuclei template to use for the scan (in this case, `/Users/sina/Desktop/PHP-version.yaml`).
- `p` option specifies the port to listen on (in this case, `http://127.0.0.1:8081`).

When the command is executed, Nuclei will use the specified template to scan the specified URL and report any vulnerabilities it finds. The `-p` option is used to listen on a port for any HTTP requests that may be generated during the scan.